# Hyprland Configuration - Migrated from BSPWM
# Based on your BSPWM configuration with equivalent keybindings

env = LIBVA_DRIVER_NAME,nvidia
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct

# Startup applications
exec-once = waybar
exec-once = swww-daemon
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec-once = nm-applet &
exec-once = dunst &
exec-once = kdeconnectd &
exec-once = kdeconnect-indicator &
exec-once = flatpak run com.github.hluk.copyq &
exec-once = /usr/bin/1password --silent &
exec-once = swww-daemon &

################
### MONITORS ### 
################

# Monitor setup - matching your BSPWM configuration
monitor=DP-1,2560x1440@143.91,0x0,1
monitor=HDMI-1,2560x1440@143.91,2560x0,1

# Set primary monitor
monitor=DP-1,preferred,0x0,1

###################
### MY PROGRAMS ###
###################

$terminal = kitty
$fileManager = nautilus
$menu = rofi -show drun
$screenshot = flameshot gui
$screenshot_full = flameshot screen
$screenshot_gnome = gnome-screenshot -i

#################
### WORKSPACE ###
#################

# Workspace assignments (matching your BSPWM setup)
workspace = 1, monitor:DP-1
workspace = 2, monitor:DP-1
workspace = 3, monitor:DP-1
workspace = 4, monitor:DP-1
workspace = 5, monitor:DP-1
workspace = 11, monitor:HDMI-1
workspace = 22, monitor:HDMI-1
workspace = 33, monitor:HDMI-1
workspace = 44, monitor:HDMI-1
workspace = 55, monitor:HDMI-1

#####################
### LOOK AND FEEL ###
#####################

general {
    gaps_in = 12
    gaps_out = 12
    border_size = 2
    col.active_border = rgba(33,246,137,1.0)
    col.inactive_border = rgba(100,100,100,1.0)
    resize_on_border = true
    allow_tearing = false
    layout = dwindle
}

cursor {
    no_hardware_cursors = true
}

decoration {
    rounding = 18
    active_opacity = 1.0
    inactive_opacity = 0.8
    
    blur {
        enabled = true
        size = 5
        passes = 3
        new_optimizations = true
    }
    
    drop_shadow = true
    shadow_range = 10
    shadow_render_power = 3
    col.shadow = rgba(0,0,0,0.6)
}

animations {
    enabled = true
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    animation = windows, 1, 7, overshot, slide
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

dwindle {
    pseudotile = true
    preserve_split = true
    split_ratio = 0.52
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = true
}

#############
### INPUT ###
#############

input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0
    touchpad {
        natural_scroll = true
    }
}

gestures {
    workspace_swipe = true
}

###################
### KEYBINDINGS ###
###################

$mainMod = SUPER

# Basic window management
bind = CTRL ALT, T, exec, $terminal
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, Q, killactive,
bind = $mainMod, M, exit,
bind = $mainMod, F, fullscreen,
bind = $mainMod, V, togglefloating,

# Program launcher (matching your BSPWM setup)
bind = $mainMod, exec, $menu
bind = $mainMod, Pause, exec, $menu
bind = $mainMod, Z, exec, $menu
bind = $mainMod, grave, exec, $HOME/.config/rofi/scripts/rofi-mouse-menu.sh

# Terminal dropdown (matching your BSPWM setup)
bind = CTRL, Return, exec, tdrop -ma -w -4 -y "45" -h 80% -s dropdown kitty

# Clipboard manager
bind = $mainMod, V, exec, flatpak run com.github.hluk.copyq toggle

# Screenshots (matching your BSPWM setup)
bind = , PRINT, exec, $screenshot
bind = CTRL, PRINT, exec, $screenshot_gnome
bind = ALT, PRINT, exec, $screenshot_full

# Audio and system controls
bind = $mainMod, A, exec, pavucontrol
bind = $mainMod, B, exec, blueman-manager
bind = $mainMod, N, exec, gnome-control-center wifi

# Dead keys layout
bind = $mainMod, Insert, exec, $HOME/.config/hypr/scripts/dead-keys/dead-keys.sh

# Lock screen (native Hyprland)
bind = $mainMod, L, exec, hyprlock

# Restart Hyprland
bind = $mainMod ALT, R, exec, hyprctl reload

# Window movement
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Move windows
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# Move floating windows (matching your BSPWM setup)
# Note: In BSPWM, super + arrow moved floating windows, but in Hyprland we use different approach
# For floating windows, use super + shift + arrow to move them

# Resize windows (matching your BSPWM setup)
bind = $mainMod ALT, left, resizeactive, -20 0
bind = $mainMod ALT, right, resizeactive, 20 0
bind = $mainMod ALT, up, resizeactive, 0 -20
bind = $mainMod ALT, down, resizeactive, 0 20

# Workspace navigation (handled by focus sync below)

# Move to workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5

# Monitor switching (matching your BSPWM setup)
# Alt+Enter: Send window to next monitor (matching your BSPWM super + Return)
bind = ALT, Return, exec, hyprctl dispatch movewindow mon:next

# Navigate between workspaces (matching your BSPWM dual monitor logic)
bind = $mainMod CTRL, left, exec, hyprctl dispatch workspace -1
bind = $mainMod CTRL, right, exec, hyprctl dispatch workspace +1

# Move windows between workspaces (matching your BSPWM logic)
bind = $mainMod CTRL SHIFT, left, exec, hyprctl dispatch movewindow mon:prev
bind = $mainMod CTRL SHIFT, right, exec, hyprctl dispatch movewindow mon:next

# Focus sync (matching your BSPWM super + 1-5 behavior)
bind = $mainMod, 1, exec, hyprctl dispatch workspace 1 && hyprctl dispatch workspace 11
bind = $mainMod, 2, exec, hyprctl dispatch workspace 2 && hyprctl dispatch workspace 22
bind = $mainMod, 3, exec, hyprctl dispatch workspace 3 && hyprctl dispatch workspace 33
bind = $mainMod, 4, exec, hyprctl dispatch workspace 4 && hyprctl dispatch workspace 44
bind = $mainMod, 5, exec, hyprctl dispatch workspace 5 && hyprctl dispatch workspace 55

# Alt+Tab (matching your BSPWM setup)
bind = ALT, Tab, exec, $HOME/.config/hypr/scripts/system/alttab.sh

# Media keys (matching your BSPWM setup)
bind = , XF86AudioMute, exec, playerctl play-pause
bind = , XF86AudioRaiseVolume, exec, $HOME/.config/dunst/volume/volume.sh up
bind = , XF86AudioLowerVolume, exec, $HOME/.config/dunst/volume/volume.sh down
bind = SHIFT $mainMod, XF86AudioLowerVolume, exec, $HOME/.config/dunst/volume/volume.sh down
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = $mainMod, C, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous

# Mouse bindings (matching your BSPWM setup)
bind = $mainMod, mouse:272, movewindow
bind = $mainMod, mouse:273, resizewindow

# Logitech MX 3 mouse actions (matching your BSPWM setup)
# Right click (button 3) for jgmenu
bind = , mouse:273, exec, jgmenu_run

# Side scroll (buttons 6 and 7)
bind = , mouse:276, exec, xdotool key Ctrl+equal
bind = , mouse:277, exec, xdotool key Ctrl+minus

# Thumb button (button 10) for rofi menu
bind = , mouse:274, exec, $HOME/.config/rofi/scripts/rofi-mouse-menu.sh

# Reload configuration
bind = $mainMod, Escape, exec, hyprctl reload

# Quit Hyprland
bind = $mainMod ALT, Escape, exec, hyprctl dispatch exit

##############################
### WINDOWS AND WORKSPACES ###
##############################

# Window rules (matching your BSPWM setup)
windowrulev2 = float, class:^(Gimp)$
windowrulev2 = workspace 8, class:^(Gimp)$
windowrulev2 = workspace 2, class:^(Chromium)$
windowrulev2 = float, class:^(mplayer2)$
windowrulev2 = focus, class:^(Kupfer.py)$
windowrulev2 = nofocus, class:^(Screenkey)$
windowrulev2 = float, class:^(guake)$
windowrulev2 = float, class:^(Guake)$
windowrulev2 = float, class:^(Windscribe)$
windowrulev2 = float, class:^(Windscribe2)$
windowrulev2 = float, class:^(dev.warp.Warp)$
windowrulev2 = float, class:^(Yad)$
windowrulev2 = float, class:^(yad-calendar)$
windowrulev2 = float, class:^(gnome-calendar)$
windowrulev2 = float, class:^(copyq)$
windowrulev2 = size 800 600, class:^(copyq)$
windowrulev2 = center, class:^(copyq)$

# Ignore maximize requests
windowrulev2 = suppressevent maximize, class:.*
