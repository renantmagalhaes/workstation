
###################
### KEYBINDINGS ###
###################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

# Hyprswitch configuration
$key = tab
$mod = super

####################
### BASIC ACTIONS ###
####################

# Application launchers
bind = CTRL ALT, T, exec, $terminal
bind = CTRL SHIFT, SPACE, exec, 1password --quick-access &
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, Z, exec, $menu
bindr = SUPER, SUPER_L, exec, $menu

# Window management
bind = $mainMod, Q, killactive,
bind = $mainMod SHIFT`, M, fullscreen,
bind = $mainMod, M, fullscreen, 1
bind = $mainMod, T, togglefloating,
bind = $mainMod, J, togglesplit, # dwindle

# System actions
bind = $mainMod|ALT, escape, exit
bind = $mainMod, L, exec, ~/.dotfiles/hyprland/hypr/scripts/lock.sh
bind = CTRL SUPER, C, exec, ~/.dotfiles/utils/inzone_reset_usb_pkexec.sh

# Screenshot
bind = , Print, exec, flameshot gui
#bind = , Print, exec, hyprshot -m region --freeze -o ~/Pictures/Screenshots --clipboard-only
#bind = CTRL, Print, exec, bash -c 'TMPFILE=$(mktemp /dev/shm/hyprshot-XXXXXX.png) && hyprshot -m region --freeze -f "$(basename "$TMPFILE")" -o "$(dirname "$TMPFILE")" && wl-copy < "$TMPFILE" && notify-send -i "$TMPFILE" "Screenshot" "Captured and copied" && swappy -f "$TMPFILE" && rm -f "$TMPFILE"'

# Productivity tools (clipboard manager with image previews)
#bind = $mainMod, V, exec, flatpak run com.github.hluk.copyq toggle
bind = $mainMod, V, exec, bash -c "~/.config/hypr/scripts/cliphist-rofi-img | rofi -dmenu -show-icons -theme ~/.config/rofi/cliphist.rasi -matching fuzzy -i | awk '{print \$1}' | xargs -r ~/.config/hypr/scripts/cliphist-rofi-img"
bind = ALT, V, exec, bash -c "~/.config/hypr/scripts/cliphist-rofi-img | rofi -dmenu -show-icons -theme ~/.config/rofi/cliphist.rasi -matching fuzzy -i | awk '{print \$1}' | xargs -r ~/.config/hypr/scripts/cliphist-rofi-img"

####################
### FOCUS CONTROL ###
####################

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

####################
### MOUSE BINDINGS ###
####################

# Mouse thumb button
bind = , mouse:277, exec, $HOME/.config/rofi/scripts/rofi-mouse-menu.sh

####################
### WORKSPACE PAIRS ###
####################

# Workspace pair navigation (dual monitor setup)
# Ctrl + Super + Right → next pair (1↔6 → 2↔7 ...)
bind = CTRL SUPER, right, exec, ~/.config/hypr/scripts/wpairswitch.sh next

# Ctrl + Super + Left  → previous pair (2↔7 → 1↔6 ...)
bind = CTRL SUPER, left, exec, ~/.config/hypr/scripts/wpairswitch.sh prev

# Move focused window to next paired workspace, keep both monitors in sync
bind = $mainMod CTRL SHIFT, right, exec, ~/.config/hypr/scripts/move_win_and_pair.sh next 0  # set to 1 if want wrapping around
bind = $mainMod CTRL SHIFT, left,  exec, ~/.config/hypr/scripts/move_win_and_pair.sh prev 0  # set to 1 if want wrapping around

####################
### WINDOW MOVEMENT ###
####################

# Send current window to next monitor
bind = $mainMod, RETURN, movewindow, mon:+1

####################
### TERMINAL CONTROL ###
####################

# Toggle magic workspace with kitty
bind = CTRL, RETURN, exec, ~/.config/hypr/scripts/toggle_or_spawn_special_kitty.sh

# Launch new kitty normally (not in magic workspace)
bind = CTRL SHIFT, RETURN, exec, kitty

####################
### WORKSPACE NAVIGATION ###
####################

# Swap windows with Shift + Super + Arrow keys
bind = $mainMod SHIFT, left, swapwindow, l
bind = $mainMod SHIFT, right, swapwindow, r
bind = $mainMod SHIFT, up, swapwindow, u
bind = $mainMod SHIFT, down, swapwindow, d

# Switch to workspaces (1-5 on monitor 1, 6-10 on monitor 2)
bind = SUPER, 1, exec, sh -c '~/.config/hypr/scripts/wsync.sh 1'
bind = SUPER, 2, exec, sh -c '~/.config/hypr/scripts/wsync.sh 2'
bind = SUPER, 3, exec, sh -c '~/.config/hypr/scripts/wsync.sh 3'
bind = SUPER, 4, exec, sh -c '~/.config/hypr/scripts/wsync.sh 4'
bind = SUPER, 5, exec, sh -c '~/.config/hypr/scripts/wsync.sh 5'

####################
### WINDOW MOVEMENT TO WORKSPACES ###
####################

# Move active window to a workspace with SUPER + SHIFT + [0-9]
bindd = SUPER SHIFT, code:10, Move window to workspace 1, movetoworkspace, 1
bindd = SUPER SHIFT, code:11, Move window to workspace 2, movetoworkspace, 2
bindd = SUPER SHIFT, code:12, Move window to workspace 3, movetoworkspace, 3
bindd = SUPER SHIFT, code:13, Move window to workspace 4, movetoworkspace, 4
bindd = SUPER SHIFT, code:14, Move window to workspace 5, movetoworkspace, 5
bindd = SUPER SHIFT, code:15, Move window to workspace 6, movetoworkspace, 6
bindd = SUPER SHIFT, code:16, Move window to workspace 7, movetoworkspace, 7
bindd = SUPER SHIFT, code:17, Move window to workspace 8, movetoworkspace, 8
bindd = SUPER SHIFT, code:18, Move window to workspace 9, movetoworkspace, 9
bindd = SUPER SHIFT, code:19, Move window to workspace 10, movetoworkspace, 10



####################
### SPECIAL WORKSPACES ###
####################

# Magic workspace (kitty terminal)
bind = $mainMod, Z, togglespecialworkspace, kitty
bind = $mainMod SHIFT, Z, movetoworkspace, special:kitty

# Eject from magic workspace
bind = $mainMod SHIFT, X, movetoworkspace, previous

####################
### MOUSE CONTROLS ###
####################

# Scroll through existing workspaces with SUPER + scroll
bind = SUPER, mouse_down, exec, ~/.config/hypr/scripts/wpairswitch.sh next
bind = SUPER, mouse_up, exec, ~/.config/hypr/scripts/wpairswitch.sh prev

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

####################
### MEDIA CONTROLS ###
####################

# Media playback controls
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = SUPER, C, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous

# Knob play/pause button (sends KEY_MUTE code:113)
bindl  = , XF86AudioMute, exec, playerctl play-pause

# # Volume controls
# bindle = , XF86AudioRaiseVolume, exec, pamixer -i 5 && notify-send "Volume: $(pamixer --get-volume)%"
# bindle = , XF86AudioLowerVolume, exec, pamixer -d 5 && notify-send "Volume: $(pamixer --get-volume)%"
bindle = , code:123, exec, ~/.dotfiles/hyprland/hypr/scripts/volnotify.sh +5
bindle = , code:122, exec, ~/.dotfiles/hyprland/hypr/scripts/volnotify.sh -5
#bindl  = , XF86AudioMute, exec, ~/.dotfiles/hyprland/hypr/scripts/volnotify.sh toggle

####################
### WINDOW CYCLING ###
####################

# Cycle through all windows across both active workspaces (dual monitor)
bind = ALT, Tab, exec, sh -c '~/.config/hypr/scripts/cycle_all_windows.sh next'
bind = $mainMod, Tab, exec, sh -c '~/.config/hypr/scripts/cycle_all_windows.sh prev'
