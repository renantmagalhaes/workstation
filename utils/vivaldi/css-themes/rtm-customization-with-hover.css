/* ========================================================= */
/* RTM */
/* ========================================================= */

/* ========================================================= */
/* Tab Color */
/* ========================================================= */
.tab.active {
  background-color: rgb(
    215,
    215,
    215
  ) !important;
  color: black !important;
}

/* Optional: adjust favicon and close button contrast */
.tab.active .favicon,
.tab.active .close {
  filter: none !important;
}

/* Optional: make sure title stays black even in hover states */
.tab.active .title {
  color: black !important;
}

/* ========================================================= */
/* Gaps */
/* ========================================================= */

/* Extra bottom gap like Vivaldi-Arc (for the page area) */
#browser:not(.tabs-top):not(
    .tabs-bottom
  ):not(.fullscreen)
  #webview-container {
  margin: 6px 3px 3px -3px;
}

/* Extra bottom gap for the vertical tabs bar (left side) */
#browser:not(.tabs-top):not(
    .tabs-bottom
  ):not(.fullscreen)
  .tabbar-wrapper {
  margin: 3px 3px 6px 2px;
}

/* Extra gaps for the panels container on all sides */
#browser:not(.tabs-top):not(
    .tabs-bottom
  ):not(.fullscreen)
  #panels-container {
  margin: 6px 8px 7px 0 !important;
}

/* Float the whole mainbar block with the same side gaps */
#browser:not(.tabs-top):not(
    .tabs-bottom
  ):not(.fullscreen)
  .mainbar {
  margin: 8px 8px 0 8px !important;
}
/* ========================================================= */
/* Toolbar height adjustment */
/* ========================================================= */
/* Slim mainbar */
.toolbar.toolbar-mainbar {
  min-height: 30px !important;
  height: 30px !important;
  padding: 0 4px !important;
  display: flex !important;
  align-items: center !important;
  box-sizing: border-box !important;
}

/* Send window buttons to the right and keep them clickable */
.toolbar.toolbar-mainbar
  > .window-buttongroup.on-mainbar {
  margin-left: auto !important;
  display: flex !important;
  align-items: center !important;
  -webkit-app-region: no-drag !important;
  pointer-events: auto !important;
  position: relative !important;
  z-index: 5 !important;
}
/* force window controls to the far right */
.toolbar.toolbar-mainbar {
  display: flex !important;
}

.toolbar.toolbar-mainbar
  > .window-buttongroup.on-mainbar {
  margin-left: auto !important;
  order: 9999 !important;
}

/* Normalize button size */
.window-buttongroup.on-mainbar button {
  width: 32px !important;
  height: 24px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  margin: 0 1px !important;
  padding: 0 !important;
}

/* Icons */
.window-buttongroup.on-mainbar svg {
  width: 8px !important;
  height: 8px !important;
}

/* --- Custom vertical offset (nudge up/down) --- */
.window-buttongroup.on-mainbar {
  transform: translateY(-3px);
}

/* Always hide the Vivaldi 7.6 update toolbar */
#browser
  .toolbar.toolbar-mainbar.update {
  display: none !important;
  height: 0 !important;
  min-height: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  border: 0 !important;
  overflow: hidden !important;
}

/* ---------------------------------------------
    Hide supporter badge
   --------------------------------------------- */
#panels-container .Supporter-Badge,
.toolbar .Supporter-Badge,
img.Supporter-Badge {
  display: none !important;
  visibility: hidden !important; /* belt and suspenders */
}

/* ---------------------------------------------
    Change extensions Icons
   --------------------------------------------- */

/* Change : Karakeep */
:is(
    .toolbar-extensions,
    .extensionIconPopupMenu .toolbar
  )
  .button-toolbar
  button[title*="Karakeep" i]
  img {
  content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAsQAAALEBxi1JjQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHHSURBVEiJpZWxalVBEIa/2XvIBas0SZNY2MQiJtEHSHtT+SAWQRSi2NkZUUIQxc7CCyJp8wQpbyMGvFjoC9gJgiI5e8biJt6d3bPnrHFgmzNz/n/+mdlZIbb3kzWGzXMq3abSRSrFnEFD8q3iB1Uzwckeq6OPIZwY8KMPS+jZJwa6PAOLgRSqFoJ53E9EbnJ19OUC0hmCX/UuZ7JMLVAL+OjU8NcXnnnMFZT7IWRlCGq3ARrrsoIFexLTzQ4CGcZ4FizDbOMW8gReJJ9ZqQJrkYILhP9Q4LSDwDuH2IAEqTd7OzdxD+a/JdlrO2pPydp7UJJ9Qf1TgrAHl5ugHgLvZFaKDFKRgq4m106gyQAVKAC6m+xxeaCSCUp9hQr+YYK08x5EFy1EKp0gsc72e3Dp+qex3asizKq0/rbHLWMqWqYgW7LSVWHABITfiDxFGoCHwDCNo7cHLjNBJ9Dc4fHGZwCeTMc4/wrfjKyCdNr6dtE3xD1gf21MuGYfrX8Fdnh2eht4DawESo3Zgnkn52+r4mVM49c5uP6W3A7f2zpG9Qa1vKAWP3ujbUhcoimIorLLm2uTVtDY7t36Dtzl8PQdoi+RwTR0/wE9YJOcDyuhxAAAAABJRU5ErkJggg==);
}

/* Change : Ublock */
/* ON */
:is(
    .toolbar-extensions,
    .extensionIconPopupMenu .toolbar
  )
  .button-toolbar
  button[title*="ublock origin" i]
  img {
  content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADzsAAA87AUV+OSYAAATHSURBVFhHxZdpbFRVFMfPOW+WpkzKYm1K6bCUNhAaU0QMEVEwqX4gIZiYmqiJ4IoQq4mo0aSxjBsRYjAuiTVaPpiYlOoXNfpFo8IH0aiJNsXQFkohRahQu02n7cy7x/97PMYu09epTNJf8mbuvHvuOf+7nXuHVZXmElcAM3s/x6HKNUSy5jyFQ3GdZ1Oy1ISs9ZTkjcJaqaLL0DRCSmG0/gtOOkjkWIDouzGhkxTgvsoSGr2XyKAuYy/d2JMF1BxRq/pWCveMJq43EiznlG5SkrtguRZ2+dDsWWYG/uL4/B1OvxbLOp4y1DE8opfzL3AidgenPDOXCQLwzQcuaWR4gFYwmypUbEKw22FWxiwhr03WqJokqZzGAPykzD/Dxy8jSmdeL+MexHNHZIKA2jYTXkT2ZgnKw6i5CfVRJg47hteEE4DoIoK0oHQ8EuT9e5dK4mqVOAWHRfM5yMI34u3dCFyek+AOTu+Yi1G6Ex3fPWBP9JsWkN+rLCKhnAXOCBfmycRFlBYwV+RUABYeZlV7UPgVTxeeCas+EzkTgAXlrKlzZPgjbN0XjNJhrP6zjirPJCO5EYDQ2Mh/s0pTMMSNBWwdg+OTakwcI+KbamclYDpXhnTIMH1uwvxBeZQ7e3k0arNuEaYlWNS+MXwroX4UMT8U5q1YwYeJzaBXlQYjnMJO+0HVOngCwVtPJ5ZYHHrEIt4GwQvdbeiDrwC0bEfQr8L9F4/azM9gozYhoJtEroKc1mbGrOeojDvWnNLrmAIPKJn7IX4x9rV/3gb+I6BUitktHZpfHIwtp/7Fl+Vp5K5mzG3SNTB6wQ5YNbHVOHzaNWKJQRKTh9DrKFLvjMEd/EeAeYGQPmuxVr95TvN2redhTchjRuVTMqYbub46tlxO1LZpyArYWyB2D9pU4MkquIOvgCvIUrLtQ3HbbK+/ZAr2VVKypFx2iG1teKlCWutVA8VB2ojtV4ewVV6jrMlCAGApRY55hwbNo6+1DZd800ymbpV013dqXuiUbrZts5+Eb/asZ0V2AgDmtFCM1tmBUO3aW7TyldbhZUGhbSk2BxB8g2c2a7IW4AARC/G1OzVmYiYvvM+27Zcx3euu1P4/JglA1vRPXI6IAqyw7UzmQSSZ1d7rrHBy9WTSAmQBNhXTIEymJJspOKscm9z7lTUQ0NWXcnr5H2knBcU8hqzSAgG/OdnNe51DzAAyakPJCh3xXrikBTxOlAqMWX+g2IxTrB1qfU+x2QBfceSMRkzfJ08xOjqOtACMqlZUcK/F8iUOgY/RrBMtr1kEXAzB+fvOk+ribieOV+Uy5Vp+BKdK6xmKijE70XonqqIwmPV8O8D3P/DdQEFutEu5M8Y+1/Lx1EBEVZcWIcHcB727cCqthJHlVWcF/HZhUb8HV010ls5P/k/gMK0Al3qVd/fgrhq3tyILvggRN2AgZhbhOqQW3A/eioSsLwZLqBc9zziV/gI8GlSDFzqT69TIq5i+2yBi2lsz5juJ/fkjiXUoHNFvny/kIfieNrFkJcAFo/HGkzpvdNA8gdHYC/ui8Y3gw6EPLz5jst62V/Kfk+c7E2iTpYBxHOwwRQkxO3DpvEdUV6F76LV8z2oaU/2BozEc2Z7pjKQFzB1E/wImbUHcrGYyeQAAAABJRU5ErkJggg==);
}

/* OFF */
:is(
    .toolbar-extensions,
    .extensionIconPopupMenu .toolbar
  )
  .button-toolbar
  button[title*="ublock origin" i][title*="off" i]
  img {
  content: url(data:image/png;base64,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);
}
/* ---------------------------------------------
    Vivaldi Icon
   --------------------------------------------- */

/* Hide the default SVG logo */
button.vivaldi .vivaldi-v svg {
  display: none !important;
}

/* Replace it with your own PNG (external or base64) */
button.vivaldi .vivaldi-v {
  display: inline-block;
  width: 22px; /* same size as original */
  height: 22px;
  background: url("https://cdn-icons-png.flaticon.com/512/18472/18472594.png")
    no-repeat center center;
  background-size: contain;
}

/* Hide the expand arrow */
button.vivaldi .expand-arrow {
  display: none !important;
}

/* ========================================================= */
/* Panels */
/* ========================================================= */
/* =========================
   Lock the panels rail to 34 px
   ========================= */
/* #panels-container {
  width: 34px !important;
  min-width: 34px !important;
  max-width: 34px !important;
  flex: 0 0 34px !important;
  padding: 0 !important;
  border: 0 !important;
  box-sizing: border-box !important;
  --panelCollapsed: 34px;
  --duration: 0ms !important; 
  transition: none !important;
}


#panels-container.left,
#panels-container.right,
#panels-container.overlay,
#panels-container.icons,
#panels-container.minimized {
  width: 34px !important;
  min-width: 34px !important;
  max-width: 34px !important;
  flex-basis: 34px !important;
}

#panels-container[style*="width: 34px"],
#panels-container.icons,
#panels-container.minimized {

  .ToolbarButton-Button .button-icon,
  .ToolbarButton-Button .button-icon svg,
  .ToolbarButton-Button .button-icon img {
    transform: translateX(2px) !important;
  } */

/* ========================================================= */
/* page zoom */
/* ========================================================= */

/* popup page zoom control */
.toolbar-mainbar
  .page-zoom-controls
  input[type="range"] {
  position: absolute;
  width: 142px;
  transform: translate(-7px, 0);
  visibility: hidden;
  opacity: 0;
  z-index: 9;
  background-image: repeating-linear-gradient(
    -50deg,
    #0000 0 20%,
    var(--colorBg) 0 21%,
    #fff6 0 40%,
    var(--colorBg) 0 41%
  );
  box-shadow: 0 0 0 7px var(--colorBg),
    0 0 0 8px var(--colorBorder),
    0 2px 12px hsl(0deg 0% 0% / 25%);
  transition: visibility 0.6s,
    opacity 0.2s ease-out 0.4s,
    transform 0.25s ease-in 0.35s !important;
}

.toolbar-mainbar
  .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  visibility: visible;
  opacity: 1;
  transform: translate(-7px, 29px);
  transition: opacity 0.1s ease-out 0.2s,
    transform 0.2s ease-out 0.1s !important;
}

.toolbar-mainbar
  .page-zoom-controls
  input[type="range"]::after {
  content: "";
  position: absolute;
  top: -19px;
  left: 13.5%;
  border: 6px solid hsl(0deg 0% 0% / 0%);
  border-bottom-color: var(
    --colorBgLight
  );
  filter: drop-shadow(
    0 -1px var(--colorBorder)
  );
  pointer-events: none;
}

.toolbar-mainbar
  .page-zoom-controls
  > input[type="range"]::before {
  content: "";
  position: absolute;
  inset: -14px 0 100% 0;
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar[title="Reset Zoom"]:has(
    button:disabled
  ) {
  display: none;
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  position: absolute;
  align-self: unset;
  transform: translate(14px, 18.5px);
  z-index: 19;
  width: 0;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease-in 0.25s,
    visibility 0.5s !important;
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  ):is(:hover, :focus-within)
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  opacity: 1;
  visibility: visible;
  transition: opacity 0.2s ease-in 0.13s !important;
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  )
  button[title="Reset Zoom"] {
  border: 0;
  height: 13px;
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  )
  button[title="Reset Zoom"]
  .button-title {
  min-width: 1ch;
  max-width: 1ch;
  font-size: 13px;
  font-weight: bold;
  text-shadow: -1px 0 var(--colorBg),
    1px 0 var(--colorBg),
    -2px 0 var(--colorBg),
    2px 0 var(--colorBg);
}

.toolbar-mainbar
  .page-zoom-controls:has(
    input[type="range"]
  )
  button[title="Reset Zoom"]:hover
  .button-title {
  font-size: 17px;
  color: var(--colorHighlightBg);
}

/* leftside 1st button */
.toolbar-mainbar
  > div:first-child
  > .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  transform: translate(3px, 29px);
}

.toolbar-mainbar
  > div:first-child
  > .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  transform: translate(24px, 18.5px);
}

/* rightside button */
.toolbar-mainbar
  > div:nth-last-child(4)
  > .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  transform: translate(-10px, 29px);
}

.toolbar-mainbar
  > div:nth-last-child(3)
  > .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  transform: translate(-44px, 29px);
}

.toolbar-mainbar
  > div:nth-last-child(3)
  > .page-zoom-controls
  input[type="range"]::after {
  left: 40%;
}

.toolbar-mainbar
  > div:nth-last-child(3)
  > .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  transform: translate(-24px, 18.5px);
}

.toolbar-mainbar
  > div:nth-last-child(2)
  > .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  transform: translate(-78px, 29px);
}

.toolbar-mainbar
  > div:nth-last-child(2)
  > .page-zoom-controls
  input[type="range"]::after {
  left: 64%;
}

.toolbar-mainbar
  > div:nth-last-child(2)
  > .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  transform: translate(-58px, 18.5px);
}

.toolbar-mainbar
  > div:last-child
  > .page-zoom-controls:is(
    :hover,
    :focus-within
  )
  > input[type="range"] {
  transform: translate(-112px, 29px);
}

.toolbar-mainbar
  > div:last-child
  > .page-zoom-controls
  input[type="range"]::after {
  left: 88%;
}

.toolbar-mainbar
  > div:last-child
  > .page-zoom-controls:has(
    input[type="range"]
  )
  .button-toolbar:has(
    button[title="Reset Zoom"]
  ) {
  transform: translate(-92px, 18.5px);
}

/* ========================================================= */
/* Vertical Tab Bar Auto Collapse on Hover                  */
/* ========================================================= */
/* 
 * This CSS makes the vertical tab bar automatically contract
 * to 37px when not hovered (showing only favicons), and expand
 * to 200px on hover to show full tab titles.
 * Works for both left and right vertical tab bars.
 */

:root {
  --tabbar-collapsed-width: 44px;
  --tabbar-expanded-width: 200px;
  --tabbar-transition-duration: 0.3s;
  --tabbar-transition-timing: ease-in-out;
}

/* ========================================================= */
/* Left Vertical Tab Bar                                     */
/* ========================================================= */

/* Tab bar container - collapsed by default */
#browser.tabs-left
  #tabs-tabbar-container {
  width: var(
    --tabbar-collapsed-width
  ) !important;
  overflow: visible !important;
  transition: width
    var(--tabbar-transition-duration)
    var(--tabbar-transition-timing) !important;
}

/* Tab bar container - expanded on hover */
#browser.tabs-left
  #tabs-tabbar-container:hover {
  width: var(
    --tabbar-expanded-width
  ) !important;
}

/* Make tab background transparent when collapsed - only favicon will have background */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab {
  background-color: transparent !important;
  background: transparent !important;
  overflow: visible !important;
  transition: background-color
    var(--tabbar-transition-duration)
    var(--tabbar-transition-timing) !important;
}

/* Ensure tab position doesn't clip the button */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab-position {
  overflow: visible !important;
  width: 100% !important;
}

/* Ensure tabbar-wrapper doesn't clip the button */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  ~ .tabbar-wrapper,
#browser.tabs-left
  .tabbar-wrapper:has(
    #tabs-tabbar-container:not(:hover)
  ),
#browser.tabs-left
  .inner
  > .tabbar-wrapper {
  overflow: visible !important;
}

/* Ensure tabs-container doesn't clip */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  #tabs-container {
  overflow: visible !important;
}

/* Center the tab header when collapsed to properly center the favicon button */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  overflow: visible !important;
  padding: 0 !important;
}

/* Make favicon look like a button when collapsed - add background around favicon */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon,
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon {
  background-color: var(
    --colorTabBar,
    rgba(255, 255, 255, 0.1)
  ) !important;
  border-radius: 6px !important;
  padding: 5px !important;
  margin: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box !important;
  width: 30px !important;
  height: 30px !important;
  min-width: 30px !important;
  min-height: 30px !important;
  max-width: 30px !important;
  max-height: 30px !important;
  overflow: visible !important;
  flex-shrink: 0 !important;
  transition: background-color
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    border-radius
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    padding
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing) !important;
}

/* Constrain the favicon image size inside the button - bigger when collapsed */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon
  img,
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon
  img,
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon
  svg,
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon
  svg {
  max-width: 20px !important;
  max-height: 20px !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  object-fit: contain !important;
}

/* Active tab favicon gets a slightly different background to indicate it's active */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab.active
  .favicon,
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab.active
  .tab-header
  .favicon {
  background-color: rgb(
    215,
    215,
    215
  ) !important;
}

/* Hide tab titles when collapsed */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .tab
  .title {
  max-width: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
  transition: max-width
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    opacity
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing) !important;
}

/* Hide workspace button text when collapsed */
#browser.tabs-left
  #tabs-tabbar-container:not(:hover)
  .button-toolbar.workspace-popup.tabbar-workspace-button
  .button-title {
  max-width: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
}

/* Show tab titles when expanded - restore natural state */
#browser.tabs-left
  #tabs-tabbar-container:hover
  .tab
  .title {
  max-width: none !important;
  opacity: 1 !important;
}

/* Show workspace button text when expanded */
#browser.tabs-left
  #tabs-tabbar-container:hover
  .button-toolbar.workspace-popup.tabbar-workspace-button
  .button-title {
  max-width: none !important;
  opacity: 1 !important;
}

/* ========================================================= */
/* Right Vertical Tab Bar                                    */
/* ========================================================= */

/* Tab bar container - collapsed by default */
#browser.tabs-right
  #tabs-tabbar-container {
  width: var(
    --tabbar-collapsed-width
  ) !important;
  overflow: visible !important;
  transition: width
    var(--tabbar-transition-duration)
    var(--tabbar-transition-timing) !important;
}

/* Tab bar container - expanded on hover */
#browser.tabs-right
  #tabs-tabbar-container:hover {
  width: var(
    --tabbar-expanded-width
  ) !important;
}

/* Make tab background transparent when collapsed - only favicon will have background */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab {
  background-color: transparent !important;
  background: transparent !important;
  overflow: visible !important;
  transition: background-color
    var(--tabbar-transition-duration)
    var(--tabbar-transition-timing) !important;
}

/* Ensure tab position doesn't clip the button */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab-position {
  overflow: visible !important;
  width: 100% !important;
}

/* Ensure tabbar-wrapper doesn't clip the button */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  ~ .tabbar-wrapper,
#browser.tabs-right
  .tabbar-wrapper:has(
    #tabs-tabbar-container:not(:hover)
  ),
#browser.tabs-right
  .inner
  > .tabbar-wrapper {
  overflow: visible !important;
}

/* Ensure tabs-container doesn't clip */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  #tabs-container {
  overflow: visible !important;
}

/* Center the tab header when collapsed to properly center the favicon button */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  width: 100% !important;
  overflow: visible !important;
  padding: 0 !important;
}

/* Make favicon look like a button when collapsed - add background around favicon */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon,
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon {
  background-color: var(
    --colorTabBar,
    rgba(255, 255, 255, 0.1)
  ) !important;
  border-radius: 6px !important;
  padding: 5px !important;
  margin: 0 !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  box-sizing: border-box !important;
  width: 30px !important;
  height: 30px !important;
  min-width: 30px !important;
  min-height: 30px !important;
  max-width: 30px !important;
  max-height: 30px !important;
  overflow: visible !important;
  flex-shrink: 0 !important;
  transition: background-color
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    border-radius
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    padding
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing) !important;
}

/* Constrain the favicon image size inside the button - bigger when collapsed */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon
  img,
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon
  img,
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .favicon
  svg,
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .tab-header
  .favicon
  svg {
  max-width: 20px !important;
  max-height: 20px !important;
  width: 20px !important;
  height: 20px !important;
  display: block !important;
  object-fit: contain !important;
}

/* Active tab favicon gets a slightly different background to indicate it's active */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab.active
  .favicon,
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab.active
  .tab-header
  .favicon {
  background-color: rgb(
    215,
    215,
    215
  ) !important;
}

/* Hide tab titles when collapsed */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .tab
  .title {
  max-width: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
  transition: max-width
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing),
    opacity
      var(--tabbar-transition-duration)
      var(--tabbar-transition-timing) !important;
}

/* Hide workspace button text when collapsed */
#browser.tabs-right
  #tabs-tabbar-container:not(:hover)
  .button-toolbar.workspace-popup.tabbar-workspace-button
  .button-title {
  max-width: 0 !important;
  opacity: 0 !important;
  overflow: hidden !important;
}

/* Show tab titles when expanded - restore natural state */
#browser.tabs-right
  #tabs-tabbar-container:hover
  .tab
  .title {
  max-width: none !important;
  opacity: 1 !important;
}

/* Show workspace button text when expanded */
#browser.tabs-right
  #tabs-tabbar-container:hover
  .button-toolbar.workspace-popup.tabbar-workspace-button
  .button-title {
  max-width: none !important;
  opacity: 1 !important;
}
